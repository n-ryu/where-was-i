# 구현 로드맵

이 문서는 MVP 구현 순서를 정의합니다. 각 단계는 이전 단계에 의존하므로 순서대로 진행합니다.

## AI 연동 방침

- **AI 기능은 Phase 10에서 마지막에 연동**
- AI 없이도 모든 핵심 기능이 동작해야 함 (PRD 요구사항)
- 각 Phase에서 AI 연동 시 확장될 부분은 `[AI 확장]` 표시로 명시
- AI 연동 전까지는 수동 입력 방식으로 동작

---

## Phase 1: 프로젝트 기반 구조

프로젝트의 뼈대를 구성합니다.

### 1.1 폴더 구조 정의

```
src/
├── components/     # 재사용 가능한 UI 컴포넌트
├── pages/          # 라우트 페이지 컴포넌트
├── hooks/          # 커스텀 훅
├── stores/         # Jotai 상태 관리
├── db/             # Dexie 데이터베이스
├── types/          # TypeScript 타입 정의
├── utils/          # 유틸리티 함수
└── test/           # 테스트 설정
```

### 1.2 라우터 설정

TanStack Router를 사용한 기본 라우팅 구조:

- `/` - 메인 화면 (일과 중 추적)
- `/plan` - 매일 계획
- `/review` - 매일 회고 (타임라인)
- `/goals` - Goal 관리
- `/settings` - 설정

### 1.3 Dexie DB 스키마 정의

PRD의 데이터 모델 기반으로 IndexedDB 스키마 정의:

- `goals` 테이블
- `tasks` 테이블

---

## Phase 2: 데이터 레이어

저장소(Repository) 패턴으로 데이터 접근 추상화.

### 2.1 Goal 저장소

- Goal CRUD 함수
- 활성/비활성 Goal 필터링

### 2.2 Task 저장소

- Task CRUD 함수
- 날짜별 Task 조회
- 상태별 Task 필터링
- TaskEvent 추가

---

## Phase 3: Goal 관리

가장 단순한 CRUD 기능부터 시작합니다.

### 3.1 Goal 목록 화면

- Goal 목록 표시
- 활성/비활성 상태 표시

### 3.2 Goal 생성/수정/삭제

- Goal 생성 폼
- Goal 수정 폼
- Goal 삭제 확인

### 3.3 Goal 활성/비활성 전환

- 토글 UI
- 상태 변경 저장

---

## Phase 4: Task 기본 기능

Task의 기본 CRUD와 상태 관리.

### 4.1 Task 목록 화면

- 오늘 Task 목록 표시
- 상태별 구분 표시

### 4.2 Task 생성/수정/삭제

- Task 생성 폼 (한 줄 = 하나의 과업)
- Task 수정 폼
- Task 삭제 확인

`[AI 확장]` Phase 10 연동 시: 자유 텍스트 입력 → 여러 과업으로 자동 분리

### 4.3 Task 상태 변경

- 대기 → 진행중
- 진행중 → 완료/대기
- Task에 Goal 연결

---

## Phase 5: 메인 화면 (일과 중 추적)

핵심 사용자 경험 화면.

### 5.1 화면 구조

- 상단: 새 과업 입력 인풋 (한 줄 = 하나의 과업)
- 진행중 과업 영역 (강조)
- 오늘 과업 목록

`[AI 확장]` Phase 10 연동 시: 상단 인풋에서 자유 텍스트 → 여러 과업 자동 분리

### 5.2 인터랙션

- 진행중 과업 체크박스 → 완료 처리
- 대기중 과업 클릭 → 진행중으로 전환
- 과업 전환 시 기존 과업 일시정지

### 5.3 전환 사유 기록

- 전환 시 사유 입력 UI
- 일정 시간 후 자동 닫힘
- TaskEvent에 메모 저장

---

## Phase 6: 매일 계획 플로우

하루 계획을 수립하는 워크플로우.

### 6.1 Step 1: 미완료 과업 처리

- 전날 미완료 과업 목록
- 오늘 포함 / 취소 / 내일로 미루기

### 6.2 Step 2: 오늘 과업 생성

- 텍스트 입력 UI (한 줄씩 과업 입력)
- 활성 Goal 목록 표시
- Goal 선택 시 해당 Goal과 연결된 Task 생성

`[AI 확장]` Phase 10 연동 시:
- 자유 텍스트 → 과업 단위 자동 분리
- 큰 과업 → 세부 과업 분리 제안
- 모호한 과업 → 구체화 제안

### 6.3 Step 3: 계획 확정

- 오늘 과업 최종 목록
- 수정/삭제 가능
- 확정 버튼

---

## Phase 7: 타임라인 뷰 (회고)

하루 동안의 활동을 시각화.

### 7.1 타임라인 컴포넌트

- TaskEvent 기반 시간대별 표시
- 시작/일시정지/완료 시각화

### 7.2 오늘 회고 화면

- 타임라인 뷰 표시
- 완료/미완료 과업 요약

---

## Phase 8: 설정 화면

사용자 설정 관리.

### 8.1 시간 설정

- 계획 시간 설정
- 회고 시간 설정
- 추적 주기 설정

### 8.2 알림 설정

- 알림 활성화 토글
- 알림 권한 요청

### 8.3 API 키 설정 (AI 연동 준비)

- OpenAI / Anthropic API 키 입력 UI
- 로컬 저장 (IndexedDB)
- AI 기능 연동 전까지 "Phase 10에서 활성화 예정" 표시

---

## Phase 9: PWA 및 알림

오프라인 지원 및 푸시 알림.

### 9.1 PWA 설정

- 매니페스트 설정
- Service Worker 설정
- 오프라인 지원

### 9.2 푸시 알림

- 계획 시간 알림
- 회고 시간 알림
- 주기적 추적 알림

---

## Phase 10: AI 기능 연동

LLM 연동 기능. 이전 Phase에서 `[AI 확장]` 표시된 부분을 활성화.

### 10.1 AI 클라이언트 설정

- OpenAI / Anthropic API 클라이언트 구현
- API 키 유효성 검사
- 에러 핸들링

### 10.2 과업 분리 기능

- 사용자 자유 텍스트 → 여러 과업으로 분리
- Phase 4, 5, 6의 입력 UI에 적용

### 10.3 과업 구체화 기능

- 모호한 과업에 대한 구체화 제안
- Phase 6의 계획 플로우에 적용

---

## 진행 상태

| Phase | 상태 | 비고 |
|-------|------|------|
| 1. 프로젝트 기반 구조 | 완료 | |
| 2. 데이터 레이어 | 완료 | |
| 3. Goal 관리 | 완료 | |
| 4. Task 기본 기능 | 완료 | AI 확장 포인트 있음 |
| 5. 메인 화면 | 대기 | AI 확장 포인트 있음 |
| 6. 매일 계획 플로우 | 대기 | AI 확장 포인트 있음 |
| 7. 타임라인 뷰 | 대기 | |
| 8. 설정 화면 | 대기 | API 키 UI 포함 |
| 9. PWA 및 알림 | 대기 | |
| 10. AI 기능 연동 | 대기 | 마지막 단계 |
