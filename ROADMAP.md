# 구현 로드맵

이 문서는 MVP 구현 순서를 정의합니다. 각 단계는 이전 단계에 의존하므로 순서대로 진행합니다.

---

## Phase 1: 프로젝트 기반 구조

프로젝트의 뼈대를 구성합니다.

### 1.1 폴더 구조 정의

```
src/
├── components/     # 재사용 가능한 UI 컴포넌트
├── pages/          # 라우트 페이지 컴포넌트
├── hooks/          # 커스텀 훅
├── stores/         # Jotai 상태 관리
├── db/             # Dexie 데이터베이스
├── types/          # TypeScript 타입 정의
├── utils/          # 유틸리티 함수
└── test/           # 테스트 설정
```

### 1.2 라우터 설정

TanStack Router를 사용한 기본 라우팅 구조:

- `/` - 메인 화면 (일과 중 추적)
- `/plan` - 매일 계획
- `/log` - 로그 페이지 (타임라인)
- `/settings` - 설정

### 1.3 Dexie DB 스키마 정의

PRD의 데이터 모델 기반으로 IndexedDB 스키마 정의:

- `tasks` 테이블
- `settings` 테이블

---

## Phase 2: 데이터 레이어

저장소(Repository) 패턴으로 데이터 접근 추상화.

### 2.1 Task 저장소

- Task CRUD 함수
- 날짜별 Task 조회
- 상태별 Task 필터링
- TaskEvent 추가

### 2.2 Settings 저장소

- API 키 저장/조회/삭제
- Provider 선택 (OpenAI / Anthropic)

---

## Phase 3: Task 기본 기능

Task의 기본 CRUD와 상태 관리.

### 3.1 Task 목록 화면

- 오늘 Task 목록 표시
- 상태별 구분 표시

### 3.2 Task 생성/수정/삭제

- Task 생성 (Floating Input)
- Task 인라인 수정
- Task 삭제 확인

### 3.3 Task 상태 변경

- 대기 → 진행중
- 진행중 → 완료/대기

---

## Phase 4: 메인 화면 (일과 중 추적)

핵심 사용자 경험 화면.

### 4.1 화면 구조

- 진행중 과업 영역 (강조)
- 오늘 과업 목록
- 하단: Floating Input

### 4.2 계획 리다이렉트

- 오늘 Task가 없으면 `/plan`으로 리다이렉트

### 4.3 인터랙션

- 진행중 과업 체크박스 → 완료 처리
- 대기중 과업 클릭 → 진행중으로 전환
- 과업 전환 시 기존 과업 일시정지

---

## Phase 5: 매일 계획 플로우

하루 계획을 수립하는 워크플로우. Progressive Form 형태.

### 5.1 엔트리 단계

- 오늘 Task가 없을 때만 표시
- 인사 메시지 + "시작하기" 버튼

### 5.2 Step 1: 미완료 과업 선택

- 전날 미완료 과업 목록
- 토글 기반 UI (포함/미포함)
- "진행하기" 버튼

### 5.3 Step 2: 과업 추가

- 전체 과업 리스트 표시
- Floating Input으로 과업 추가
- 인라인 수정/삭제
- "완료" 버튼 → 과업 페이지로 이동

---

## Phase 6: 공통 컴포넌트

재사용 가능한 컴포넌트 구현.

### 6.1 FloatingInput

- 화면 하단 고정 입력 필드
- Enter 키 또는 전송 버튼으로 제출
- 한글 IME 조합 처리
- 모바일 키보드 대응

### 6.2 RootLayout

- 하단 탭바 형태 네비게이션
- 4개 탭: 메인, 계획, 로그, 설정

---

## Phase 7: 로그 페이지 (타임라인)

하루 동안의 활동을 시각화.

### 7.1 타임라인 컴포넌트

- TaskEvent 기반 시간대별 표시
- 시작/일시정지/완료 시각화

### 7.2 로그 페이지

- 타임라인 뷰 표시
- 날짜 선택 (추후)

---

## Phase 8: 설정 페이지

API 키 관리.

### 8.1 API 키 관리

- Provider 선택 (OpenAI / Anthropic)
- API 키 입력/저장/삭제
- 연결 상태 표시

---

## Phase 9: 디자인 개선

UI/UX 개선 작업.

### 9.1 모바일 시뮬레이터 레이아웃

- [x] 데스크톱에서 모바일 시뮬레이터 형태로 표시
- [x] PhoneFrame 컴포넌트 (390px 너비, 둥근 모서리)
- [x] 모바일에서는 전체 화면 사용

### 9.2 과업 페이지 개선

- [x] 섹션 구분 제거 (진행중/대기중/완료 → 통합 리스트)
- [x] 진행중 과업 스타일 강조 (녹색 테두리, 배경)
- [x] 실시간 소요시간 표시 (펄싱 점 + "N분 경과")

### 9.3 계획 페이지 개선

- [x] 채팅형 UI로 변경 (스텝별 화면 전환 → 스텝 누적)
- [x] StepIndicator 제거
- [x] 각 스텝 완료 시 다음 스텝이 아래에 추가되는 형태
- [x] 애니메이션 적용 (Framer Motion)

---

## Phase 10: PWA

오프라인 지원.

### 10.1 PWA 설정

- 매니페스트 설정
- Service Worker 설정
- 오프라인 지원

---

## 진행 상태

| Phase | 상태 | 비고 |
|-------|------|------|
| 1. 프로젝트 기반 구조 | 완료 | |
| 2. 데이터 레이어 | 완료 | Goal 제거됨, settings 테이블 추가 |
| 3. Task 기본 기능 | 완료 | |
| 4. 메인 화면 | 완료 | FloatingInput 적용, 리다이렉트 로직 추가 |
| 5. 매일 계획 플로우 | 완료 | 토글 UI 적용, Progressive Form 구현 |
| 6. 공통 컴포넌트 | 완료 | FloatingInput, 탭바 네비게이션 |
| 7. 로그 페이지 | 완료 | Timeline, TimelineItem 컴포넌트 |
| 8. 설정 페이지 | 완료 | API 키 저장/삭제, 프로바이더 선택 |
| 9. 디자인 개선 | 완료 | 모바일 시뮬레이터, 과업 페이지, 계획 페이지 개선 |
| 10. PWA | 완료 | manifest, service worker, 아이콘 설정 |
