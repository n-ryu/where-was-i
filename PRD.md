# PRD: where-was-i

## 개요

ADHD 환자 혹은 꾸준한 집중과 과업 추적이 필요한 사용자를 위한 비서 앱.
사용자가 하루 계획을 수립하고 일과 중 과업 수행을 추적하여 성공적인 하루를 보낼 수 있도록 돕는다.

## 목표

- 사용자가 하루에 대한 계획을 수립하고 이를 성공적으로 수행하는 것을 돕는다
- 계획의 실행을 꾸준히 추적하고 기록할 수 있도록 돕는다
- 빠르고 간편한 기록을 통해 사용자의 인지 부담을 최소화한다

## 플랫폼 및 기술

| 항목 | 결정 |
|------|------|
| 플랫폼 | PWA (Progressive Web App) |
| 데이터 저장 | 브라우저 로컬 저장소 (IndexedDB) |
| 디바이스 동기화 | 없음 (단일 디바이스) |
| 사용자 인증 | 없음 |
| AI/LLM 연동 | 사용자 API 키 직접 입력 (OpenAI 또는 Anthropic) |

### AI/LLM 연동 상세

- 사용자가 설정 화면에서 OpenAI 또는 Anthropic API 키를 직접 입력
- API 키는 IndexedDB에 로컬 저장 (서버 전송 없음)
- API 키가 없으면 AI 기능 비활성화, 수동 과업 입력으로 동작
- 로컬 퍼스트 철학과 일관성 유지, 서버 운영 부담 없음

## 데이터 모델

### Goal (장기 목표)

장기적으로 신경 쓰고 있는 주제나 목표. 일일 과업 목록과 분리하여 관리하며, 완료 압박 없이 유지된다.

| 속성 | 타입 | 설명 |
|------|------|------|
| id | string | 고유 식별자 |
| title | string | 목표 제목 |
| isActive | boolean | 활성 여부 (비활성화하면 리마인드에서 제외) |
| createdAt | datetime | 생성 시각 |
| updatedAt | datetime | 수정 시각 |

### Task (일일 과업)

오늘 또는 특정 날짜에 수행할 구체적인 과업.

| 속성 | 타입 | 설명 |
|------|------|------|
| id | string | 고유 식별자 |
| title | string | 과업 제목 |
| status | enum | 대기(pending), 진행중(in_progress), 완료(completed), 취소(cancelled) |
| goalId | string? | 연결된 Goal ID (선택적) |
| date | date | 수행 예정 날짜 |
| events | TaskEvent[] | 상태 변화 이벤트 로그 |
| createdAt | datetime | 생성 시각 |
| updatedAt | datetime | 수정 시각 |

### TaskEvent (과업 이벤트)

Task 내부에 배열로 저장되는 상태 변화 기록. 회고 시 타임라인 뷰로 하루 흐름을 시각화한다.

| 속성 | 타입 | 설명 |
|------|------|------|
| eventType | enum | started(시작), paused(일시정지), completed(완료), cancelled(취소) |
| timestamp | datetime | 이벤트 발생 시각 |

**이벤트 기록 규칙:**
- 과업 시작 시 `started` 이벤트 기록
- 다른 과업으로 전환 시 기존 진행중 과업에 `paused` 이벤트 기록
- 과업 완료 시 `completed` 이벤트 기록
- 과업 취소 시 `cancelled` 이벤트 기록

### 설계 결정

- **Goal과 Task 분리**: 장기 목표는 별도 화면에서 관리, 일일 과업에 섞이지 않음
- **Task-Goal 연결**: 선택적. Task에 Goal이 없어도 됨
- **Task 상태**: 4종 (대기, 진행중, 완료, 취소)
- **하루의 정의**: 계획 시간부터 다음 계획 시간(또는 회고 시간) 사이의 기간. 타임라인 뷰와 미완료 과업 판별에 사용
- **우선순위**: 없음
- **예상 소요 시간**: 없음
- **주기적 과업**: MVP에서 제외

## 주요 기능

### 1. 매일 계획 (MVP 포함)

매일 일과 전 정해둔 시간에 하루 계획을 정리한다.

#### 흐름

**Step 1: 미완료 과업 처리**
- 전날 완수하지 못한 과업들을 리마인드
- 체크박스로 오늘 계획에 포함할지 선택 (선택 시 date를 오늘로 변경)
- 포함하지 않는 경우: 취소 또는 내일로 미루기 (date를 내일로 변경)

**Step 2: 오늘 과업 생성**
- 채팅 형태의 입력 UI
- 사용자가 자유롭게 텍스트 입력
- LLM이 과업 단위로 분리하여 Task 자동 생성
- 활성화된 Goal 목록 표시하여 리마인드
- Goal 선택 시 해당 Goal과 연결된 Task로 생성

**Step 3: 계획 확정**
- 오늘 수행할 과업 목록 최종 확인
- 필요시 과업 수정/삭제

#### 사용자 설정

- 계획 시간: 설정 화면에서 직접 입력

### 2. 일과 중 기록과 추적 (MVP 포함)

일과 중에 과업 수행을 기록하고 주기적으로 추적한다.

#### 진입점

- **주기적 알림**: 설정한 주기마다 앱이 기록 요청, 클릭 시 앱 열림
- **사용자 능동 기록**: 사용자가 원할 때 앱을 열어서 기록

#### 메인 화면 구성

- **상단**: 새 과업 입력 인풋
- **진행중 과업 영역**: 현재 진행중인 과업을 강조 표시 (없으면 빈 상태)
- **오늘 과업 목록**: 오늘 계획된 과업 리스트, 각 과업에 체크박스

#### 인터랙션

| 액션 | 결과 |
|------|------|
| 진행중 과업 체크박스 클릭 | 과업 완료 처리, 진행중 영역 비워짐 |
| 대기중 과업 클릭 | 해당 과업이 진행중으로 변경, 기존 진행중 과업은 대기로 |
| 상단 인풋에 입력 | 새 과업 생성 (계획에 없던 과업), AI가 과업 분리 |

#### 사용자 설정

- 추적 주기: 설정 화면에서 직접 입력 (예: 30분, 1시간)

### 3. 매일 회고 (MVP 일부 포함)

#### MVP 포함

- **타임라인 뷰**: TaskEvent 기반으로 하루 동안 어떤 과업을 언제 시작/중지/완료했는지 시각화

#### MVP 제외

- 하루 수행 과업의 완료 상태 체크
- 완료하지 못한 과업 확인 및 메모
- 계획에 없던 과업 확인 및 메모

## 사용자 설정

| 설정 항목 | 설명 | MVP 포함 |
|-----------|------|----------|
| 계획 시간 | 매일 계획을 진행할 시간 | O |
| 회고 시간 | 매일 회고를 진행할 시간 | O |
| 추적 주기 | 과업 기록을 요청하는 간격 | O |
| 알림 활성화 | 알림 수신 여부 | O |
| API 키 | OpenAI 또는 Anthropic API 키 (선택) | O |

### MVP 제외 항목

- 주말/휴일 별도 설정

## MVP 범위

### 포함

1. **Goal 관리**
   - Goal 생성/수정/삭제
   - Goal 활성/비활성 전환

2. **매일 계획**
   - Task 생성/수정/삭제
   - 미완료 Task 리마인드
   - 활성 Goal 리마인드 및 Task 생성 제안
   - 세부 과업 분리 (AI)
   - 과업 구체화 (AI)

3. **일과 중 추적**
   - 현재 Task 기록
   - Task 상태 변경
   - 주기적 기록 요청

4. **매일 회고 (일부)**
   - 타임라인 뷰

5. **기본 설정**
   - 계획 시간 설정
   - 회고 시간 설정
   - 추적 주기 설정
   - 알림 활성화 설정
   - API 키 설정

6. **알림**
   - 계획 시간 알림
   - 회고 시간 알림
   - 주기적 추적 알림 (PWA Push Notification)

### 제외

- 매일 회고 전체 기능 (타임라인 뷰 제외)
- 주기적 과업
- 주말/휴일 설정
- 과업 순서 정렬/재배치
- 통계/분석
- 멀티 디바이스 동기화

## 비기능 요구사항

- **빠른 접근**: 홈 화면 아이콘 탭 한 번으로 앱 진입
- **최소 입력**: 과업 기록 시 불필요한 입력 최소화
- **오프라인 지원**: 네트워크 없이도 기본 기능 동작 (AI 기능 제외)
- **데이터 보존**: 브라우저 데이터 삭제 전까지 로컬에 안전하게 저장
