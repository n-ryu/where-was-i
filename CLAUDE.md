# CLAUDE.md

이 파일은 Claude Code (claude.ai/code)가 이 저장소에서 작업할 때 참고하는 가이드입니다.

## 프로젝트 개요

프로젝트의 목표와 내용은 [README.md](./README.md)를 참조하세요.
상세 요구사항은 [PRD.md](./PRD.md)를 참조하세요.
기술 스택은 [TECH_STACK.md](./TECH_STACK.md)를 참조하세요.
구현 순서는 [ROADMAP.md](./ROADMAP.md)를 참조하세요. 각 Phase 구현 완료 시 ROADMAP.md의 진행 상태 표에 완료를 표시합니다.
Claude Code 고급 기능 활용 계획은 [CLAUDE_FEATURES.md](./CLAUDE_FEATURES.md)를 참조하세요.

## 언어

이 프로젝트에서는 한국어로 대화합니다.

## 작업 방식

사용자의 지시에 불분명한 부분이 있으면 바로 작업을 시작하지 말고, 먼저 사용자에게 질문하여 충분한 정보를 확보해야 합니다. `AskUserQuestion` 툴을 사용하여 요구사항, 기술적 선택, 구현 방향 등을 명확히 한 후 작업을 진행하세요.

대화 중 CLAUDE.md에 반영하면 좋을 내용(규칙, 패턴, 결정 사항 등)이 발생하면, 사용자에게 CLAUDE.md를 업데이트할지 먼저 질의하세요.

## 커밋 규칙

작업 단위마다 명확한 커밋을 남깁니다. 커밋 단위는 인지적으로 구분 가능한 최소 단위로 잘게 나눕니다.

- **커밋 제목**: 작업된 내용을 간결하게 설명
- **커밋 본문**: 어떤 프롬프트 또는 맥락에 의해 작성된 커밋인지 명시
- **커밋 전 필수 확인**: 타입 체크, 린트, 테스트가 모두 통과해야 함

### Tidy First 원칙

[Kent Beck의 Tidy First](https://www.oreilly.com/library/view/tidy-first/9781098151232/) 원칙을 따릅니다.

- **구조 변경과 동작 변경을 분리**: 리팩토링(구조 변경)과 기능 추가/버그 수정(동작 변경)은 별도의 커밋으로 나눔
- **정리 먼저, 변경 나중**: 코드 변경이 필요할 때, 먼저 구조를 정리하는 커밋을 하고, 그 다음 동작을 변경하는 커밋을 함
- **작은 단위로 정리**: 정리 작업이 1시간 이상 걸린다면 범위를 다시 검토

### 커밋 단위 예시

- 프로젝트 초기화 명령어 실행 후 커밋
- 패키지 종류별로 별도 커밋 (예: lint 관련 패키지, 테스트 관련 패키지 각각 커밋)
- 설정 파일 추가/수정 시 커밋
- 기능 구현 시 논리적 단위마다 커밋
- 리팩토링과 기능 변경은 반드시 별도 커밋

## 개발 명령어

프로젝트 초기화 후 사용할 명령어입니다.

```bash
# 의존성 설치
pnpm install

# 개발 서버 실행
pnpm dev

# 프로덕션 빌드
pnpm build

# 빌드 결과물 미리보기
pnpm preview

# 타입 체크
pnpm typecheck

# 린트 검사
pnpm lint

# 린트 자동 수정
pnpm lint:fix

# 포맷팅 검사
pnpm format:check

# 포맷팅 적용
pnpm format

# 테스트 실행
pnpm test

# 테스트 (watch 모드)
pnpm test:watch

# 커밋 전 전체 검사 (타입체크 + 린트 + 테스트)
pnpm check
```

## 테스트 작성 규칙

이 프로젝트는 **TDD(Test-Driven Development)** 방식을 따릅니다.

### 기본 원칙

1. **테스트 먼저 작성**: 기능 구현 전에 테스트 코드를 먼저 작성
2. **Red-Green-Refactor**: 실패하는 테스트 → 통과하는 최소 구현 → 리팩토링
3. **테스트와 구현 분리 커밋**: 테스트 코드 작성과 구현 코드는 별도 커밋으로 분리

### 테스트 범위

| 대상 | 테스트 유형 | 필수 여부 |
|------|-------------|-----------|
| 유틸리티 함수 | 유닛 테스트 | 필수 |
| 커스텀 훅 | 유닛 테스트 | 필수 |
| 데이터 레이어 (저장소) | 통합 테스트 | 필수 |
| 컴포넌트 | 컴포넌트 테스트 | 주요 인터랙션만 |
| 페이지/플로우 | E2E (MVP 제외) | 선택 |

### 테스트 파일 위치

- 테스트 대상과 같은 디렉토리에 `*.test.ts(x)` 파일로 작성
- 예: `src/hooks/useTask.ts` → `src/hooks/useTask.test.ts`

### 테스트 명명 규칙

```typescript
describe('테스트 대상', () => {
  it('특정 조건에서 기대하는 동작을 해야 한다', () => {
    // ...
  });
});
```

### TDD 워크플로우 (사용자 승인 필수)

**1단계: 요구사항 도출**
- 구현할 기능에 대해 사용자에게 적극적으로 질의하여 요구사항을 명확히 함
- 불명확한 부분이 있으면 반드시 확인 후 진행

**2단계: 테스트 스펙 작성 (사용자 승인 필요)**
- `test.todo()` 또는 `it.todo()` 형태로 테스트 케이스 목록 작성
- 작성된 테스트 스펙을 사용자에게 제시하고 승인을 받은 후 다음 단계 진행
- 예시:
  ```typescript
  describe('TaskRepository', () => {
    it.todo('Task를 생성할 수 있다');
    it.todo('Task 목록을 날짜별로 조회할 수 있다');
    it.todo('Task 상태를 변경할 수 있다');
  });
  ```

**3단계: 테스트 구현**
- 승인된 스펙을 바탕으로 실패하는 테스트 작성 (Red)
- 테스트 커밋: "테스트: [기능명] 테스트 추가"

**4단계: 기능 구현 진입 (사용자 승인 필요)**
- 테스트 작성 완료 후, 실제 구현 단계로 넘어가기 전 사용자의 승인 필요
- 테스트를 통과하는 최소 구현 (Green)
- 구현 커밋: "[기능명] 구현"

**5단계: 리팩토링**
- 필요시 리팩토링 후 별도 커밋

## 구현 순서

상세 구현 순서는 [ROADMAP.md](./ROADMAP.md)를 참조하세요.
